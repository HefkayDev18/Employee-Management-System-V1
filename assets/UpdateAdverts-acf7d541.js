import{c as U,a as F,r as i,j as t,b as I,_ as u,A as S}from"./index-8cf87543.js";import{B as C}from"./Breadcrumb-9ee5e05d.js";const E=()=>{var j;const k=U(),p=F(),e=(j=k.state)==null?void 0:j.ad,[N,x]=i.useState(!1),[o,g]=i.useState((e==null?void 0:e.title)||""),[d,h]=i.useState((e==null?void 0:e.description)||""),[c,b]=i.useState((e==null?void 0:e.link)||""),[f,v]=i.useState((e==null?void 0:e.isAdActive)||!1),[n,y]=i.useState((e==null?void 0:e.imageUrl)||""),[r,A]=i.useState(null),[l,m]=i.useState(!!(e!=null&&e.imageUrl));i.useEffect(()=>{e&&(g(e.title||""),h(e.description||""),b(e.link||""),v(e.isAdActive||!1),y(e.imageUrl||""),m(!!e.imageUrl))},[e]);const w=async a=>{if(a.preventDefault(),!o||!d||!c||!n&&!r){u.error("All fields are required");return}const s=new FormData;s.append("title",o),s.append("description",d),s.append("link",c),s.append("isAdActive",f.toString()),l&&r?s.append("imageFile",r):n&&s.append("imageUrl",n);try{x(!0),await S((e==null?void 0:e.employeeId)||"",Number((e==null?void 0:e.advertisementId)||0),s),u.success("Advertisement updated successfully",{duration:8e3,onClose:()=>p("/core-features/viewadverts")}),p("/core-features/viewadverts")}catch{u.error("Failed to update advertisement")}finally{x(!1)}};return N?t.jsx(I,{}):t.jsxs(t.Fragment,{children:[t.jsx(C,{pageName:"Update Advertisement"}),t.jsx("div",{className:"container mx-auto p-4 bg-white shadow-lg rounded-lg px-6 py-8",children:t.jsxs("form",{onSubmit:w,children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700 font-bold mb-2 dark:text-black",htmlFor:"title",children:"Title"}),t.jsx("input",{id:"title",type:"text",className:"shadow appearance-none border rounded w-3/4 py-2 px-3 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline",value:o,onChange:a=>g(a.target.value),required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700 font-bold mb-2 dark:text-black",htmlFor:"description",children:"Description"}),t.jsx("textarea",{id:"description",className:"shadow appearance-none border rounded w-3/4 py-2 px-3 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline",value:d,onChange:a=>h(a.target.value),required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700 font-bold mb-2 dark:text-black",htmlFor:"isAdActive",children:"Active"}),t.jsx("input",{id:"isAdActive",type:"checkbox",checked:f,onChange:a=>v(a.target.checked),className:"mr-2 leading-tight"}),t.jsx("span",{className:"text-sm dark:text-black",children:"Is Advertisement Active"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700 font-bold mb-2 dark:text-black",htmlFor:"advertLink",children:"Advert Link"}),t.jsx("input",{id:"advertLink",type:"url",className:"shadow appearance-none border rounded w-5/6 py-2 px-3 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline",value:c,onChange:a=>b(a.target.value),required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700 font-bold mb-2 dark:text-black",children:"Change Image Source"}),t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsxs("label",{className:"mr-4",children:[t.jsx("input",{type:"radio",className:"mr-2 text-sm",checked:!l,onChange:()=>m(!1)}),"Use Image URL"]}),t.jsxs("label",{children:[t.jsx("input",{type:"radio",className:"mr-2 text-sm",checked:l,onChange:()=>m(!0)}),"Upload Image File"]})]}),l?t.jsx("input",{id:"imageFile",type:"file",accept:"image/*",className:"shadow appearance-none border rounded w-5/6 text-sm py-2 px-3 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline",onChange:a=>{var s;return A(((s=a.target.files)==null?void 0:s[0])||null)},required:!n}):t.jsx("input",{id:"imageUrl",type:"text",className:"shadow appearance-none border rounded w-5/6 text-sm py-2 px-3 text-gray-700 text-sm leading-tight focus:outline-none focus:shadow-outline",value:n,onChange:a=>y(a.target.value),required:!r})]}),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx("button",{className:"bg-primary hover:bg-primary text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Update"})})]})})]})};export{E as default};
