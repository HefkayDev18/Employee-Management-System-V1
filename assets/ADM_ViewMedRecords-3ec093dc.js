import{r as o,a as S,g as T,n as R,j as t,b as B}from"./index-8cf87543.js";import{B as F}from"./Breadcrumb-9ee5e05d.js";import{P as M}from"./Pagination-0e4a8747.js";import{u as U,w as D}from"./xlsx-9de2e086.js";const z=()=>{const[p,u]=o.useState([]),[c,h]=o.useState(""),[l,f]=o.useState(1),n=5,g=S(),[y,d]=o.useState(!0);o.useEffect(()=>{b()},[]);const b=async()=>{d(!0);try{const e=await T();u(e)}catch(e){R.error("Error fetching employees."),console.error("Error fetching employees:",e)}finally{d(!1)}},i=p.filter(e=>{const s=c.toLowerCase();return e.fullName.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||e.phoneNumber.toLowerCase().includes(s)||e.position.toLowerCase().includes(s)||e.department.toLowerCase().includes(s)}),m=l*n,x=m-n,N=i.slice(x,m),j=e=>{f(e)},w=e=>{g("/medicals/add-medical-records",{state:{employeeId:e}})},E=()=>{const e="EmployeeList.xlsx",s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",k=i.map(r=>({"Full Name":r.fullName,Email:r.email,"Phone Number":r.phoneNumber,Position:r.position,Department:r.department})),v={Sheets:{"Employee List":U.json_to_sheet(k)},SheetNames:["Employee List"]},L=D(v,{bookType:"xlsx",type:"array"}),C=new Blob([L],{type:s}),P=URL.createObjectURL(C),a=document.createElement("a");a.href=P,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)};return y?t.jsx(B,{}):t.jsxs(t.Fragment,{children:[t.jsx(F,{pageName:"Employee Medical Records"}),t.jsxs("div",{className:"container mx-auto py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-center text-black mb-6 dark:text-white",children:"Employees List"}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("input",{type:"text",placeholder:"Search by full name, email, phone number, position, or department",value:c,onChange:e=>h(e.target.value),className:"border w-1/2 border-gray-200 dark:border-strokedark rounded px-3 py-2 w-full mr-4 focus:outline-none focus:border-primary dark:bg-boxdark"}),t.jsx("button",{onClick:E,className:"bg-primary text-white text-sm font-bold py-1 px-2 rounded focus:outline-none hover:bg-primary-dark",children:"Export to Excel"})]}),t.jsx("div",{className:"rounded-lg shadow-md px-8 bg-white dark:bg-boxdark p-4 mb-4",children:t.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:N.map((e,s)=>t.jsx("li",{className:"py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-md font-medium text-gray-800 dark:text-white",children:t.jsxs("b",{children:[x+s+1,". ",e.fullName]})}),t.jsxs("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:["Email: ",e.email]}),t.jsxs("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:["Phone Number: ",e.phoneNumber]}),t.jsxs("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:["Position: ",e.position]}),t.jsxs("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:["Department: ",e.department]})]}),t.jsx("button",{className:"bg-primary text-white text-xs py-2 px-3 rounded-md font-sm transition hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-dark",onClick:()=>w(e.employeeId),children:"Add Medical Records"})]})},e.employeeId))})}),t.jsx(M,{currentPage:l,totalPages:Math.ceil(i.length/n),onPageChange:j})]})]})};export{z as default};
