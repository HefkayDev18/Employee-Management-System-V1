import{c as h,a as g,r as o,j as e,b,H as N,I as y,n as c}from"./index-8cf87543.js";import{B as j}from"./Breadcrumb-9ee5e05d.js";const k=()=>{const u=h(),m=g(),{department:a}=u.state||{},[n,l]=o.useState({departmentName:"",description:"",facultyName:"",headOfDepartment:""}),[i,r]=o.useState(!0);o.useEffect(()=>{(async()=>{if(!(a!=null&&a.departmentId)){r(!1);return}try{const t=await N(a.departmentId);l({departmentName:t.departmentName,description:t.description,facultyName:t.facultyName,headOfDepartment:t.headOfDepartment}),r(!1)}catch(t){console.error("Error fetching department:",t),r(!1)}})()},[a==null?void 0:a.departmentId]);const d=s=>{const{name:t,value:f}=s.target;l(x=>({...x,[t]:f}))},p=async s=>{s.preventDefault(),r(!0);try{await y(a.departmentId,n),r(!1),c.success("Department record updated successfully!",{duration:5e3,onClose:()=>{m("/departments/view-departments")}}),m("/departments/view-departments")}catch(t){console.error("Error updating department:",t),r(!1),c.error("Failed to update department record. Please try again.")}};return i?e.jsx(b,{}):e.jsxs(e.Fragment,{children:[e.jsx(j,{pageName:"Update Department"}),e.jsxs("div",{className:"container py-8 px-6 bg-gray-900 rounded-lg shadow-lg",children:[e.jsxs("h1",{className:"text-3xl font-bold text-center mb-8 dark:text-white",children:["Update ",a.departmentName," department's data"]}),e.jsxs("form",{onSubmit:p,className:"max-w-full",children:[e.jsxs("div",{className:"flex justify-around gap-5",children:[e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"departmentName",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Department Name"}),e.jsx("input",{type:"text",id:"departmentName",name:"departmentName",value:n.departmentName,placeholder:"Enter Department Name",onChange:d,required:!0,readOnly:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]}),e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"facultyName",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Faculty Name"}),e.jsx("input",{type:"text",id:"facultyName",name:"facultyName",value:n.facultyName,placeholder:"Enter Faculty Name",onChange:d,required:!0,readOnly:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]})]}),e.jsxs("div",{className:"flex justify-around gap-5",children:[e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"headOfDepartment",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Head of Department"}),e.jsx("input",{type:"text",id:"headOfDepartment",name:"headOfDepartment",value:n.headOfDepartment,placeholder:"Enter Head of Department",onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]}),e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:n.description,placeholder:"Enter Description",onChange:d,rows:4,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]})]}),e.jsx("div",{className:"flex justify-center mt-6 gap-4",children:e.jsx("button",{type:"submit",className:"bg-primary text-white py-3 px-6 rounded-lg font-medium transition hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-dark",children:i?"Updating...":"Update Department"})})]})]})]})};export{k as default};
