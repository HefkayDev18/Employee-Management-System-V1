import{r,a as B,u as F,J as E,j as e,b as I,K as M,S as f,M as S,n as g}from"./index-8cf87543.js";import{B as T}from"./Breadcrumb-9ee5e05d.js";import{P as L}from"./Pagination-0e4a8747.js";const R=()=>{const[n,y]=r.useState([]),[j,o]=r.useState(null),[c,N]=r.useState(1),l=2,m=B(),[b,x]=r.useState(!0),{user:a}=F();r.useEffect(()=>{p()},[]);const p=async()=>{try{const t=await E();y(t),x(!1)}catch(t){console.error("Error fetching departments:",t),x(!1)}},w=t=>{o(t)},u=()=>{o(null)},k=async t=>{if((await f.fire({title:"Are you sure?",html:'<span style="color: red">You will not be able to recover this department once deleted!</span>',icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"})).isConfirmed)try{await S(t),p(),g.success("Department deleted successfully!",{duration:5e3}),m("/departments/view-departments")}catch{g.error("Failed to delete department. Please try again.")}},D=async t=>{const d=n.find(i=>i.departmentId===t);d&&(await f.fire({title:"Department Update",html:`<span style="color: orange">Are you sure you want to update this department's info?</span>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, confirmed!"})).isConfirmed&&m("/departments/update-department",{state:{department:d}})},s=n.find(t=>t.departmentId===j),h=c*l,C=h-l,v=n.slice(C,h),P=t=>{N(t)};return b?e.jsx(I,{}):e.jsxs(e.Fragment,{children:[e.jsx(T,{pageName:"Departments List"}),e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-black mb-6 dark:text-white",children:"List of Departments"}),e.jsx("div",{className:"rounded-lg shadow-md px-8 bg-white dark:bg-boxdark p-4",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:v.map(t=>e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-md font-medium text-gray-800 dark:text-white",children:e.jsxs("b",{children:[t.departmentName.toUpperCase()," DEPARTMENT"]})}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Description : ",t.description]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Faculty Name : Faculty of ",t.facultyName]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Head of Department : ",e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:t.headOfDepartment})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{className:"text-sm font-medium text-primary dark:text-white mr-2",onClick:()=>w(t.departmentId),children:"View More"}),(a==null?void 0:a.role)==="Faculty_Officer"&&e.jsx("button",{className:"text-sm font-medium text-warning dark:text-white mr-2",onClick:()=>D(t.departmentId),children:"Update"}),(a==null?void 0:a.role)==="Faculty_Officer"&&e.jsx("span",{className:"mx-auto",children:e.jsxs("button",{className:"text-sm font-medium text-danger dark:text-white",title:"Delete",onClick:()=>k(t.departmentId),children:["Delete",e.jsx(M,{className:"inline-block text-xs ml-1 mb-1"})]})})]})]})},t.departmentId))})}),e.jsx(L,{currentPage:c,totalPages:Math.ceil(n.length/l),onPageChange:P})]}),s&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50",onClick:u}),e.jsxs("div",{className:"bg-white dark:bg-boxdark rounded-lg shadow-lg p-8 max-w-md transform transition-all duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:e.jsxs("b",{children:[s.departmentName.toUpperCase()," DEPARTMENT"]})}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Description : ",s.description]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Faculty Name : Faculty of ",s.facultyName]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Head of Department: ",e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:s.headOfDepartment})]}),e.jsx("button",{className:"mt-6 bg-primary hover:bg-dark text-white font-semibold py-1 px-2 rounded",onClick:u,children:"Close"})]})]})]})};export{R as default};
