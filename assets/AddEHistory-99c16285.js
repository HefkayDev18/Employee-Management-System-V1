import{a as b,c as E,r as l,n as a,j as e,b as j,f as k,h as w}from"./index-8cf87543.js";import{B as N}from"./Breadcrumb-9ee5e05d.js";const C=()=>{var p;const m=b(),r=(p=E().state)==null?void 0:p.employeeId,[n,f]=l.useState(null),[d,u]=l.useState({dateEmployed:"",currentlyEmployed:!1,description:""}),[y,o]=l.useState(!1);l.useEffect(()=>{if(!r){a.error("Employee ID is missing.");return}(async()=>{try{const t=await k(r);f(t),o(!1)}catch(t){console.error("Error fetching employee data:",t),o(!1),a.error("Failed to load employee data.")}})()},[r]);const i=s=>{const{name:t,type:x,value:g}=s.target;u(x==="checkbox"?c=>({...c,[t]:s.target.checked}):c=>({...c,[t]:g}))},h=async s=>{if(s.preventDefault(),!r){a.error("Employee ID is missing.");return}o(!0);try{await w(r,d),o(!1),a.success("Employment history added successfully!",{duration:5e3,onClose:()=>m("/core-features/history")}),m("/core-features/history")}catch(t){console.error("Error adding employee history:",t),o(!1),a.error("Failed to add employment history. Please try again.")}};return y?e.jsx(j,{}):e.jsxs(e.Fragment,{children:[e.jsx(N,{pageName:"Add Employee History"}),e.jsxs("div",{className:"container py-8 px-6 bg-gray-900 rounded-lg shadow-lg",children:[e.jsxs("h1",{className:"text-3xl font-bold text-center mb-8 dark:text-white",children:["Add ",(n==null?void 0:n.fullName)+"'s"," History Info"]}),e.jsxs("form",{onSubmit:h,className:"max-w-full",children:[e.jsxs("div",{className:"flex justify-around gap-5",children:[e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"dateEmployed",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Date Employed"}),e.jsx("input",{type:"date",id:"dateEmployed",name:"dateEmployed",value:d.dateEmployed,onChange:i,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]}),e.jsxs("div",{className:"mb-4 w-1/2 flex items-center bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"currentlyEmployed",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Currently Employed?"}),e.jsx("input",{type:"checkbox",id:"currentlyEmployed",name:"currentlyEmployed",checked:d.currentlyEmployed,onChange:i,className:"mx-2 leading-tight block h-4 w-4 border-gray-300 rounded focus:ring-indigo-500"})]})]}),e.jsx("div",{className:"flex justify-around gap-5",children:e.jsxs("div",{className:"mb-4 w-full bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:d.description,onChange:i,required:!0,rows:4,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]})}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{type:"submit",className:"bg-primary text-white py-3 px-6 rounded-lg font-medium transition hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-dark",children:y?"Adding...":"Add History"})})]})]})]})};export{C as default};
