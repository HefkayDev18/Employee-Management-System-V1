import{r as s,a as k,u as v,P as C,j as e,b as P,K as L,S,Q as B,n as m}from"./index-8cf87543.js";import{B as I}from"./Breadcrumb-9ee5e05d.js";import{P as O}from"./Pagination-0e4a8747.js";const Y=()=>{const[a,h]=s.useState([]),[f,i]=s.useState(null),[r,g]=s.useState(1),l=5,y=k(),[b,n]=s.useState(!0),{user:c}=v();s.useEffect(()=>{o()},[]);const o=async()=>{try{const t=await C();h(t),n(!1)}catch(t){console.error("Error fetching faculties:",t),n(!1)}},j=t=>{i(t)},d=()=>{i(null)},p=async t=>{if((await S.fire({title:"Are you sure?",html:'<span style="color: red">You will not be able to recover this faculty once deleted!</span>',icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"})).isConfirmed)try{await B(t),o(),m.success("Faculty deleted successfully!",{duration:5e3}),y("/faculties/view-faculties")}catch{m.error("Failed to delete faculty. Please try again.")}},u=a.find(t=>t.facultyId===f),x=r*l,w=x-l,F=a.slice(w,x),N=t=>{g(t)};return b?e.jsx(P,{}):e.jsxs(e.Fragment,{children:[e.jsx(I,{pageName:"Faculties List"}),e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-black mb-6 dark:text-white",children:"List of Faculties"}),e.jsx("div",{className:"rounded-lg shadow-md px-8 bg-white dark:bg-boxdark p-4",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:F.map(t=>e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("div",{className:"text-md font-medium text-gray-800 dark:text-white",children:e.jsxs("b",{children:["FACULTY OF ",t.facultyName.toUpperCase()]})})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{className:"text-sm font-medium text-primary dark:text-white mr-2",onClick:()=>j(t.facultyId),children:"View More"}),(c==null?void 0:c.role)==="Faculty_Officer"&&e.jsx("span",{className:"mx-auto",children:e.jsxs("button",{className:"text-sm font-medium text-danger dark:text-white",title:"Delete",onClick:()=>p(t.facultyId),children:["Delete",e.jsx(L,{className:"inline-block text-xs ml-1 mb-1"})]})})]})]})},t.facultyId))})}),e.jsx(O,{currentPage:r,totalPages:Math.ceil(a.length/l),onPageChange:N})]}),u&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50",onClick:d}),e.jsxs("div",{className:"bg-white dark:bg-boxdark rounded-lg shadow-lg p-8 max-w-md transform transition-all duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:e.jsxs("b",{children:["FACULTY OF ",u.facultyName.toUpperCase()]})}),e.jsx("button",{className:"mt-6 bg-primary hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded",onClick:d,children:"Close"})]})]})]})};export{Y as default};
