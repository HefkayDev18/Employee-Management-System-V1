import{r,a as I,u as R,g as B,j as e,b as U,e as V,n as F}from"./index-8cf87543.js";import{B as O}from"./Breadcrumb-9ee5e05d.js";import{P as W}from"./Pagination-0e4a8747.js";const q=()=>{const[n,k]=r.useState([]),[f,c]=r.useState(null),[l,m]=r.useState(null),[b,N]=r.useState(null),[w,v]=r.useState(null),[E,C]=r.useState(null),[x,S]=r.useState(1),d=5,h=I(),[H,g]=r.useState(!0),{user:a}=R();r.useEffect(()=>{D()},[]);const D=async()=>{g(!0);try{const t=await B();k(t)}catch(t){console.error("Error fetching employees:",t)}finally{g(!1)}},y=async t=>{c(t);try{const s=await V(t),o=n.find(M=>M.employeeId===t);o&&(N(o.fullName),v(o.position),C(o.department)),m(s)}catch(s){F.error("No history available for this employee, click add history"),console.error("Error fetching employee history:",s)}},i=()=>{c(null),m(null)},p=t=>{h("/core-features/update-history",{state:{employeeId:t}})},L=t=>{h("/core-features/add-history",{state:{employeeId:t}})},u=x*d,j=u-d,P=n.slice(j,u),A=t=>{S(t)};return H?e.jsx(U,{}):e.jsxs(e.Fragment,{children:[e.jsx(O,{pageName:"Employment Histories"}),e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-black mb-6 dark:text-white",children:"List of Employees"}),e.jsx("div",{className:"rounded-lg shadow-md px-8 bg-white dark:bg-boxdark p-4",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:P.map((t,s)=>e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-md font-medium text-gray-800 dark:text-white",children:e.jsxs("b",{children:[j+s+1,". ",t.fullName]})}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Current Position: ",t.position]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Department: ",t.department]})]}),(a==null?void 0:a.role)==="HR_Admin"&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{className:"text-sm font-medium text-primary dark:text-white mr-2",onClick:()=>y(t.employeeId),children:"View More"}),t.hasEmploymentHistory?e.jsx("button",{className:"text-sm font-medium text-warning dark:text-white mr-2",onClick:()=>p(t.employeeId),children:"Update History"}):e.jsx("button",{className:"text-sm font-medium text-success dark:text-white mr-2",onClick:()=>L(t.employeeId),children:"Add History"})]}),(a==null?void 0:a.role)!=="HR_Admin"&&e.jsx("button",{className:"text-sm font-medium text-primary dark:text-white mr-2",onClick:()=>y(t.employeeId),children:"View More"})]})},t.employeeId))})}),e.jsx(W,{currentPage:x,totalPages:Math.ceil(n.length/d),onPageChange:A})]}),l&&e.jsxs("div",{className:"fixed mt-15 inset-0 flex items-center justify-center z-60",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-80",onClick:i}),e.jsxs("div",{className:"relative bg-gradient-to-br w-full from-white via-gray-50 to-gray-100 dark:from-boxdark-2 dark:to-boxdark rounded-lg shadow-2xl p-8 max-w-lg mx-auto max-h-[90vh] overflow-auto transform transition-transform duration-300 scale-95 hover:scale-100",children:[e.jsx("button",{className:"absolute top-4 right-4 p-2 bg-gray-200 dark:bg-strokedark rounded-full hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors focus:outline-none",onClick:i,children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("h2",{className:"text-xl mt-6 lg:text-2xl font-bold text-gray-900 dark:text-white mb-6",children:[e.jsx("span",{className:"text-primary dark:text-primary",children:b}),"'s History Card"]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-600 mb-4 text-md dark:text-white",children:[e.jsxs("b",{children:[e.jsx("span",{className:"font-semibold",children:"Current Position:"})," ",w]}),e.jsx("br",{}),e.jsxs("b",{children:[e.jsx("span",{className:"font-semibold",children:"Current Department:"})," ",E]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary dark:from-primary dark:to-secondary rounded-lg p-6 mb-4 border border-stroke dark:border-strokedark shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Employment History"}),e.jsx("ul",{className:"space-y-4 mt-4",children:l.employmentHistories.map(t=>e.jsxs("li",{className:"bg-white dark:bg-boxdark rounded-lg p-4 border border-stroke dark:border-strokedark shadow-sm",children:[e.jsxs("p",{className:"text-gray-800 text-sm dark:text-gray-300 my-1.5",children:[e.jsx("b",{children:"Date Employed:"})," ",new Date(t.dateEmployed).toLocaleDateString()]}),e.jsx("hr",{}),e.jsxs("p",{className:"text-gray-800 text-sm dark:text-gray-300 my-1.5",children:[e.jsx("b",{children:"Date Relieved:"})," ",t.dateRelieved?new Date(t.dateRelieved).toLocaleDateString():"N/A"]}),e.jsx("hr",{}),e.jsxs("p",{className:"text-gray-800 text-sm dark:text-gray-300 my-1.5",children:[e.jsx("b",{children:"Duration:"})," ",t.duration]}),e.jsx("hr",{}),e.jsxs("p",{className:"text-gray-800 text-sm dark:text-gray-300 my-1.5",children:[e.jsx("b",{children:"Employment Status:"}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-sm ${t.currentlyEmployed?"text-success dark:text-gray":"text-danger dark:text-danger"}`,children:e.jsx("b",{children:t.currentlyEmployed?"Currently Employed":"Not Employed"})})]}),e.jsx("hr",{}),e.jsxs("p",{className:"text-gray-800 text-sm dark:text-gray-300 my-1.5",children:[e.jsx("b",{children:"Description:"})," ",t.description]}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-1",children:[e.jsx("b",{className:"text-gray-800 text-sm dark:text-gray-300",children:"Positions Held:"}),e.jsx("ul",{className:"list-disc pl-5 mt-2 text-gray-800 dark:text-gray-300",children:t.positionsHeld&&t.positionsHeld.length>0?t.positionsHeld.map((s,o)=>e.jsxs("li",{className:"flex items-center my-1",children:[e.jsx("svg",{className:"w-4 h-4 text-primary dark:text-primary mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-xs",children:[s.position,"( ",s.dateStarted?new Date(s.dateStarted).toLocaleDateString()+" ":"Start Date N/A ","-",s.dateEnded?new Date(s.dateEnded).toLocaleDateString():" End Date N/A ",")"]})]},o)):e.jsx("li",{className:"text-xs",children:"No positions held"})})]})]},t.id))})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{className:"bg-primary hover:bg-primary-dark text-white font-semibold py-2 px-4 rounded-lg shadow-lg transition-colors focus:outline-none focus:ring-4 focus:ring-primary focus:ring-opacity-50",onClick:i,children:"Close"}),l.employmentHistories.length>0&&e.jsx("button",{className:"bg-warning hover:bg-warning-dark text-white font-semibold py-2 px-4 rounded-lg shadow-lg transition-colors focus:outline-none focus:ring-4 focus:ring-warning focus:ring-opacity-50",onClick:()=>p(f||0),children:"Update History"})]})]})]})]})};export{q as default};
