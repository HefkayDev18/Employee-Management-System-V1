import{c as x,a as h,r as d,j as e,b as g,f as y,V as N,n as m,Y as j,Z as k}from"./index-8cf87543.js";import{B as w}from"./Breadcrumb-9ee5e05d.js";const F=()=>{const p=x(),i=h(),{employee:t}=p.state||{},[r,u]=d.useState({fullName:"",phoneNumber:"",email:"",department:"",position:"",salary:""}),[c,o]=d.useState(!0);d.useEffect(()=>{(async()=>{if(!(t!=null&&t.employeeId)){o(!1);return}try{const a=await y(t.employeeId),n=N(a.salary).toString();u({fullName:a.fullName,phoneNumber:a.phoneNumber,email:a.email,department:a.department,position:a.position,salary:n}),o(!1)}catch(a){console.error("Error fetching employee:",a),o(!1)}})()},[t==null?void 0:t.employeeId]);const s=l=>{const{name:a,value:n}=l.target;u(b=>({...b,[a]:a==="salary"?n.replace(/[^0-9.]/g,""):n}))},f=async l=>{if(l.preventDefault(),r.salary.trim()===""){m.error("Editing salary field is required.");return}o(!0);try{const a={...r,salary:j(r.salary)};await k(t==null?void 0:t.employeeId,a),o(!1),m.success("Employee record updated successfully!",{duration:5e3,onClose:()=>{i("/employee/view-employees")}}),i("/employee/view-employees")}catch(a){console.error("Error updating employee:",a),o(!1),m.error("Failed to update employee record. Please try again.")}};return c?e.jsx(g,{}):e.jsxs(e.Fragment,{children:[e.jsx(w,{pageName:"Update Employee"}),e.jsxs("div",{className:"container py-8 px-6 bg-gray-900 rounded-lg shadow-lg",children:[e.jsxs("h1",{className:"text-3xl font-bold text-center mb-8 dark:text-white",children:["Update ",t==null?void 0:t.fullName,"'s data"]}),e.jsxs("form",{onSubmit:f,className:"max-w-full",children:[e.jsxs("div",{className:"flex justify-around gap-5",children:[e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Full Name"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:r.fullName,placeholder:"Enter Full Name",onChange:s,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]}),e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Phone Number"}),e.jsx("input",{type:"phone",id:"phoneNumber",name:"phoneNumber",value:r.phoneNumber,placeholder:"Enter Phone Number",onChange:s,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]})]}),e.jsxs("div",{className:"flex justify-around gap-5",children:[e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,readOnly:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]}),e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Department"}),e.jsx("input",{type:"text",id:"department",name:"department",placeholder:"Enter Department",value:r.department,onChange:s,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]})]}),e.jsxs("div",{className:"flex justify-around gap-5",children:[e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Position"}),e.jsx("input",{type:"text",id:"position",name:"position",placeholder:"Enter Position",value:r.position,onChange:s,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]}),e.jsxs("div",{className:"mb-4 w-1/2 bg-white shadow-md rounded-md p-4",children:[e.jsx("label",{htmlFor:"salary",className:"block text-sm font-medium text-gray-700 dark:text-black dark:font-bold",children:"Salary (â‚¦)"}),e.jsx("input",{type:"text",id:"salary",name:"salary",placeholder:"Enter Salary",value:r.salary,onChange:s,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none sm:text-sm"})]})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{type:"submit",className:"bg-primary text-white py-3 px-6 rounded-lg font-medium transition hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-dark",children:c?"Updating...":"Update Employee"})})]})]})]})};export{F as default};
