import{r as s,u as f,j as e,k as j,E as w,_ as N}from"./index-8cf87543.js";import{B as F}from"./Breadcrumb-9ee5e05d.js";import{P as U}from"./Pagination-0e4a8747.js";const v=()=>{const[o,h]=s.useState([]),[a,p]=s.useState(""),[l,n]=s.useState([]),[u,x]=s.useState(!0),[c,y]=s.useState(1),[d]=s.useState(10),{user:g}=f();s.useEffect(()=>{(async()=>{x(!0);try{const r=await w();Array.isArray(r)?(h(r),n(r)):console.error("Unexpected response format:",r)}catch{N.error("Failed to fetch uploaded files.")}finally{x(!1)}})()},[g]),s.useEffect(()=>{n(o.filter(t=>t.documentType.toLowerCase().includes(a.toLowerCase())||t.employeeCred.fullName.toLowerCase().includes(a.toLowerCase())))},[a,o]);const i=c*d,b=i-d,m=l.slice(b,i),k=Math.ceil(l.length/d);return e.jsxs(e.Fragment,{children:[e.jsx(F,{pageName:"Files Upload History"}),e.jsx("div",{className:"rounded-lg border border-stroke bg-white shadow-lg dark:border-strokedark dark:bg-boxdark",children:e.jsxs("div",{className:"p-6.5",children:[e.jsx("div",{className:"mb-4 flex justify-between items-center",children:e.jsx("input",{type:"text",placeholder:"Search by document type or fullname...",value:a,onChange:t=>p(t.target.value),className:"w-1/2 p-2 border border-stroke rounded-lg outline-none dark:border-strokedark"})}),u?e.jsx("div",{className:"text-center text-lg text-gray-500 dark:text-white",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full bg-white dark:bg-boxdark",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Document Type"}),e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Employee"}),e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Uploaded Date"}),e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Description"}),e.jsx("th",{className:"py-2 px-4 text-center text-xs font-semibold text-gray-700 dark:text-white",children:"File"})]})}),e.jsx("tbody",{children:m.length>0?m.map(t=>{var r;return e.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[e.jsx("td",{className:"py-2 px-4 text-center text-sm text-gray-800 dark:text-white",children:t.documentType}),e.jsx("td",{className:"py-2 px-4 text-center text-sm text-gray-800 dark:text-white",children:(r=t.employeeCred)==null?void 0:r.fullName}),e.jsx("td",{className:"py-2 px-4 text-center text-sm text-gray-800 dark:text-white",children:j(t.uploadedDate)}),e.jsx("td",{className:"py-2 px-4 text-center text-xs text-gray-800 dark:text-white",children:t.description||"N/A"}),e.jsx("td",{className:"py-2 px-4 text-center text-xs text-gray-800 dark:text-white",children:e.jsx("a",{href:t.filePath,className:"text-primary hover:text-boxdark",target:"_blank",rel:"noopener noreferrer",children:e.jsx("b",{children:"View"})})})]},t.uploadId)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-2 px-4 text-center text-sm text-gray-500 dark:text-white",children:"No files available"})})})]}),e.jsx(U,{currentPage:c,totalPages:k,onPageChange:y})]})]})})]})};export{v as default};
