import{r,u as N,j as e,k as w,D as F,_ as U}from"./index-8cf87543.js";import{B as P}from"./Breadcrumb-9ee5e05d.js";import{P as S}from"./Pagination-0e4a8747.js";const I=()=>{const[x,g]=r.useState([]),[o,u]=r.useState(""),[c,i]=r.useState([]),[b,m]=r.useState(!0),[p,k]=r.useState(1),[l]=r.useState(10),{user:a}=N();r.useEffect(()=>{(async()=>{var s;m(!0);try{const n=(s=a==null?void 0:a.employeeObj)==null?void 0:s.employeeId;if(n){const d=await F(n);Array.isArray(d)?(g(d),i(d)):console.error("Unexpected response format:",d)}else console.error("Employee ID is missing.")}catch{U.error("Failed to fetch uploaded files.")}finally{m(!1)}})()},[a]),r.useEffect(()=>{i(x.filter(t=>t.documentType.toLowerCase().includes(o.toLowerCase())))},[o,x]);const h=p*l,j=h-l,y=c.slice(j,h),f=Math.ceil(c.length/l);return e.jsxs(e.Fragment,{children:[e.jsx(P,{pageName:"Uploaded Files"}),e.jsx("div",{className:"rounded-lg border border-stroke bg-white shadow-lg dark:border-strokedark dark:bg-boxdark",children:e.jsxs("div",{className:"p-6.5",children:[e.jsx("div",{className:"mb-4 flex justify-between items-center",children:e.jsx("input",{type:"text",placeholder:"Search by document type...",value:o,onChange:t=>u(t.target.value),className:"w-1/2 p-2 border border-stroke rounded-lg outline-none dark:border-strokedark"})}),b?e.jsx("div",{className:"text-center text-lg text-gray-500 dark:text-white",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full bg-white dark:bg-boxdark",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Document Type"}),e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Employee"}),e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Uploaded Date"}),e.jsx("th",{className:"py-2 px-4 text-center text-sm font-semibold text-gray-700 dark:text-white",children:"Description"}),e.jsx("th",{className:"py-2 px-4 text-center text-xs font-semibold text-gray-700 dark:text-white",children:"File"})]})}),e.jsx("tbody",{children:y.length>0?y.map(t=>{var s;return e.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[e.jsx("td",{className:"py-2 px-4 text-center text-sm text-gray-800 dark:text-white",children:t.documentType}),e.jsx("td",{className:"py-2 px-4 text-center text-sm text-gray-800 dark:text-white",children:(s=t.employeeCred)==null?void 0:s.fullName}),e.jsx("td",{className:"py-2 px-4 text-center text-sm text-gray-800 dark:text-white",children:w(t.uploadedDate)}),e.jsx("td",{className:"py-2 px-4 text-center text-xs text-gray-800 dark:text-white",children:t.description||"N/A"}),e.jsx("td",{className:"py-2 px-4 text-center text-xs text-gray-800 dark:text-white",children:e.jsx("a",{href:t.filePath,className:"text-primary hover:text-boxdark",target:"_blank",rel:"noopener noreferrer",children:e.jsx("b",{children:"View"})})})]},t.uploadId)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-2 px-4 text-center text-sm text-gray-500 dark:text-white",children:"No files available"})})})]}),e.jsx(S,{currentPage:p,totalPages:f,onPageChange:k})]})]})})]})};export{I as default};
